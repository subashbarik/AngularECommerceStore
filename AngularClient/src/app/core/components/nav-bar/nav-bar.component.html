<div class="ca-header-cotainer">
  <a href="#">
    <img
      src="/assets/images/logo.png"
      class="ca-logo"
      alt="logo"
      routerLink="/"
    />
  </a>
  <nav class="ca-main-nav">
    <ul class="ca-main-nav-list">
      <li>
        <a
          class="ca-main-nav-link"
          routerLink="/"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
          >Home</a
        >
      </li>
      <li>
        <a class="ca-main-nav-link" routerLink="/shop" routerLinkActive="active"
          >Shop</a
        >
      </li>
      <li>
        <a
          class="ca-main-nav-link"
          routerLink="/test-error"
          routerLinkActive="active"
          >Errors</a
        >
      </li>
    </ul>
  </nav>
  <div class="ca-nav-right">
    <a routerLink="/basket" class="ca-cart">
      <i class="fa fa-shopping-cart fa-2x ca-cart-icon"></i>
      <div *ngIf="basket$ | async as basket" class="ca-cart-no">
        {{ basket.items.length }}
      </div>
    </a>
    <ng-container *ngIf="(currentUser$ | async) === null">
      <a routerLink="/account/login" class="ca-nav-right ca-nav-cta">Login</a>
      <a routerLink="/account/register" class="ca-nav-right ca-nav-cta"
        >Sign up</a
      >
    </ng-container>
    <ng-container *ngIf="currentUser$ | async as loggedInUser">
      <div class="dropdown ml-3 mr-5 mt-2" dropdown>
        <a
          class="dropdown-toggle"
          style="cursor: pointer; text-decoration: none; color: #333"
          dropdownToggle
        >
          <strong>Welcome {{ loggedInUser.displayName }}</strong>
        </a>
        <div
          class="dropdown-menu dropdown-menu-right"
          style="cursor: pointer"
          *dropdownMenu
        >
          <a
            routerLink="/basket"
            class="dropdown-item d-flex align-items-center py-2"
            style="font-size: 1.4rem"
          >
            <i
              class="fa fa-shopping-cart fa-2x mr-5"
              style="font-size: 1.6rem"
            ></i>
            <span>View Basket</span>
          </a>
          <a
            routerLink="/orders"
            class="dropdown-item d-flex align-items-center py-2"
            style="font-size: 1.4rem"
          >
            <i class="fa fa-history fa-x mr-5" style="font-size: 1.6rem"></i>
            View Orders
          </a>
          <div class="dropdown-divider"></div>
          <a
            (click)="logout()"
            class="dropdown-item d-flex align-items-center py-2"
            style="font-size: 1.4rem"
          >
            <i class="fa fa-sign-out fa-2x mr-5" style="font-size: 1.6rem"></i>
            Logout
          </a>
        </div>
      </div>
    </ng-container>
  </div>
</div>
